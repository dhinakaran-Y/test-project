(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))p(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&p(u)}).observe(document,{childList:!0,subtree:!0});function w(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function p(o){if(o.ep)return;o.ep=!0;const s=w(o);fetch(o.href,s)}})();document.addEventListener("DOMContentLoaded",async function(){const g=document.getElementById("district"),i=document.getElementById("search"),w=document.getElementById("search-btn"),p=document.getElementById("state"),o=document.getElementById("con"),s=document.getElementById("institution"),u=document.getElementById("University"),y=document.getElementById("programme"),A=document.getElementById("course-info"),C=document.getElementById("course-table"),D=document.getElementById("course-dialog-close-btn"),b="https://indian-colleges-list.vercel.app/api";let c=[];const I=await T();T(),N(I),D.addEventListener("click",()=>A.close());async function T(){try{const t=await fetch(`${b}/institutions/states`);if(!t.ok)throw new Error("Network response was not working");return(await t.json()).states}catch(t){console.error("Error fetching data:",t)}}function N(t){t.forEach(n=>{const e=document.createElement("option");e.textContent=`${n.name}`,e.value=n.name,p.append(e)})}async function B(t){try{const n=`https://indian-colleges-list.vercel.app/api/institutions/states/${t}`,e=await fetch(n);if(!e.ok)throw new Error("Network response was not ok");c=(await e.json()).data,l(c),g.innerHTML="";const a=[...new Set(c.map(d=>d.district))].sort();L(a,g),x("Districts",g),u.innerHTML="";const m=[...new Set(c.map(d=>d.university))].sort(),E=["NOT APPLICABLE","NONE","None","Self","SELF"],f=m.filter(d=>!E.includes(d));L(f,u),x("Universities",u),y.innerHTML="";const v=[...new Set(c.flatMap(d=>d.programmes.map(h=>h.programme)))].sort();L(v,y),x("Programmes",y)}catch(n){console.error("Error fetching data:",n)}}function L(t,n){t.forEach(e=>{const r=document.createElement("option");r.textContent=e,r.value=e,n.append(r)})}function x(t,n){const e=document.createElement("option");e.textContent=`All ${t}`,e.value="All",e.selected=!0,n.prepend(e)}function l(t){const n=document.createDocumentFragment();n.replaceChildren(),o.innerHTML="",t.forEach(e=>{const r=document.createElement("div");r.className="bg-blue-300 w-full sm:w-87.5 min-h-50 space-y-2 rounded-lg shadow-lg p-5 pb-10 flex flex-col content-center border border-white/20 relative";const a=document.createElement("h3");a.className="font-semibold text-lg text-center",a.textContent=e.institute_name;const m=document.createElement("p");m.textContent=`Institutes Type: ${e.institution_type}`;const E=document.createElement("p");E.textContent=`State: ${e.state}`;const f=document.createElement("p");f.textContent=`District: ${e.district}`;const v=document.createElement("p");v.textContent=`University: ${e.university}`;const d=document.createElement("p");d.textContent=`Address: ${e.address}`;const h=document.createElement("button");h.className="absolute right-3 bottom-3 px-3 py-1 rounded bg-blue-400 text-white cursor-pointer",h.textContent="view courses",h.addEventListener("click",()=>$(e)),r.append(a,m,E,f,d,v,h),n.append(r)}),o.append(n)}p.addEventListener("change",function(){B(p.value)}),g.addEventListener("change",()=>{const t=g.value;if(t==="All")B(p.value),l(c);else{const n=c.filter(e=>e.district==t);l(n)}}),s.addEventListener("change",()=>{let t=s.value;if(t==="All")l(c);else{const n=c.filter(e=>e.institution_type===t);l(n)}}),u.addEventListener("change",()=>{let t=u.value;if(t==="All")l(c);else{const n=c.filter(e=>e.university===t);l(n)}}),y.addEventListener("change",()=>{let t=y.value;if(t=="All")l(c);else{const n=c.filter(e=>e.programmes.some(a=>a.programme===t));l(n)}}),w.addEventListener("click",O);const S=await M(I);S&&(i.readOnly=!1,i.title="now you can searchðŸ˜Š...",i.classList.replace("cursor-wait","cursor-text"),i.classList.add("outline","outline-green-600","scale-110"),setTimeout(()=>{i.classList.remove("outline","outline-green-600","scale-110")},3e3));async function M(t){try{const n=[];for(const e of t){const r=await fetch(`${b}/institutions/states/${e.name}`);if(!r.ok)throw new Error("Network response war not ok");const a=await r.json();n.push(...a.data)}return n}catch(n){console.error("Error fetching data:",n)}}function O(){const t=i.value.toUpperCase(),n=S.filter(e=>e.institute_name.includes(t));l(n)}function $(t){const n=t.programmes;C.innerHTML="",n.forEach(e=>{console.log(e);const r=document.createElement("tr"),a=document.createElement("td");a.textContent=e.course;const m=document.createElement("td");m.textContent=e.level;const E=document.createElement("td");E.textContent=e.programme;const f=document.createElement("td");f.textContent=e.availability,r.append(a,m,E,f),C.append(r)}),A.showModal()}});
