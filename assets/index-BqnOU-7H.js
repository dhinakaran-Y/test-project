(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))E(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&E(u)}).observe(document,{childList:!0,subtree:!0});function h(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function E(s){if(s.ep)return;s.ep=!0;const r=h(s);fetch(s.href,r)}})();document.addEventListener("DOMContentLoaded",async function(){const g=document.getElementById("district"),i=document.getElementById("search"),h=document.getElementById("state"),E=document.getElementById("con"),s=document.getElementById("institution"),r=document.getElementById("University"),u=document.getElementById("programme"),T=document.getElementById("course-info"),A=document.getElementById("course-table"),S=document.getElementById("course-dialog-close-btn"),k=document.getElementById("loading-alert"),N="https://indian-colleges-list.vercel.app/api";let c=[];const C=await I();I(),O(C),S.addEventListener("click",()=>T.close());async function I(){try{const t=await fetch(`${N}/institutions/states`);if(!t.ok)throw new Error("Network response was not working");return(await t.json()).states}catch(t){console.error("Error fetching data:",t)}}function O(t){t.forEach(n=>{const e=document.createElement("option");e.textContent=`${n.name}`,e.value=n.name,e.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",h.append(e)})}async function M(t){try{const n=`https://indian-colleges-list.vercel.app/api/institutions/states/${t}`,e=await fetch(n);if(!e.ok)throw new Error("Network response was not ok");c=(await e.json()).data,l(c),g.innerHTML="";const a=[...new Set(c.map(d=>d.district))].sort();w(a,g),b("Districts",g),r.innerHTML="";const m=[...new Set(c.map(d=>d.university))].sort(),p=["NOT APPLICABLE","NONE","None","Self","SELF"],f=m.filter(d=>!p.includes(d));w(f,r),b("Universities",r),u.innerHTML="";const y=[...new Set(c.flatMap(d=>d.programmes.map(v=>v.programme)))].sort();w(y,u),b("Programmes",u)}catch(n){console.error("Error fetching data:",n)}}function w(t,n){t.forEach(e=>{const o=document.createElement("option");o.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",o.textContent=e,o.value=e,n.append(o)})}function b(t,n){const e=document.createElement("option");e.textContent=`All ${t}`,e.value="All",e.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934];",e.selected=!0,n.prepend(e)}function l(t){if(t.length===0||t===""||t===null||t===void 0){E.classList.add("text-white"),E.innerHTML=`<div class="col-span-full mt-5 md:mt-20">
        <img src="./public/no-data-found/empty-box.png" class="w-50 m-auto">
        <p class="text-blue-100 text-center">no data found</p>
       </div>`;return}const n=document.createDocumentFragment();n.replaceChildren(),E.innerHTML="",t.forEach(e=>{const o=document.createElement("div");o.className="bg-[#0F1C2B] w-full sm:w-87.5 min-h-50 space-y-2 shadow-lg rounded-lg shadow-lg p-5 pb-10 flex flex-col content-center border border-white/20 relative";function a(F){return F.toLowerCase().split(" ").map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" ")}const m=document.createElement("h3");m.className="font-semibold text-lg text-center text-slate-200 ",m.textContent=e.institute_name;const p=document.createElement("p");p.className="text-slate-100 pt-1",p.innerHTML=`University: <span class="font-semibold text-sky-400/80">${a(e.state)}</span>`;const f=document.createElement("p");f.innerHTML=`Institution: <span class="font-semibold text-sky-400/80">${a(e.institute_name)}</span>`,f.className="text-slate-100 ";const y=document.createElement("p");y.innerHTML=`State: <span class="font-semibold text-sky-400/80">${a(e.state)}</span>`,y.className="pt-2 text-slate-100";const d=document.createElement("p");d.innerHTML=`District: <span class="font-semibold text-sky-400/80"> ${a(e.district)}</span>`,d.className="pt-2 text-slate-100";const v=document.createElement("p");v.innerHTML=`Address: <span class="font-semibold text-sky-400/80">${a(e.address)}</span>`,v.className="pb-3 pt-2 text-slate-100";const L=document.createElement("button");L.className="absolute right-3 bottom-3 px-3 py-2 bg-slate-800/80 text-sky-400/80 active:scale-95 transition-all  border border-transparent hover:border-sky-400 hover:bg-transparent hover:-translate-y-0.5 duration-300 ease-in-out hover:bg-gray-700/70  rounded   cursor-pointer",L.textContent="View Courses",L.addEventListener("click",()=>P(e)),o.append(m,f,p,y,d,v,L),n.append(o)}),E.append(n)}h.addEventListener("change",function(){M(h.value)}),g.addEventListener("change",()=>{const t=g.value;if(t==="All")M(h.value),l(c);else{const n=c.filter(e=>e.district==t);l(n)}}),s.addEventListener("change",()=>{let t=s.value;if(t==="All")l(c);else{const n=c.filter(e=>e.institution_type===t);l(n)}}),r.addEventListener("change",()=>{let t=r.value;if(t==="All")l(c);else{const n=c.filter(e=>e.university===t);l(n)}}),u.addEventListener("change",()=>{let t=u.value;if(t=="All")l(c);else{const n=c.filter(e=>e.programmes.some(a=>a.programme===t));l(n)}}),i.addEventListener("input",D($,2e3));function D(t,n){let e;return function(...o){clearTimeout(e),e=setTimeout(()=>{t.apply(this,o)},n)}}const x=await H(C);x&&(k.classList.add("hidden"),i.readOnly=!1,i.title="now you can searchðŸ˜Š...",i.classList.replace("cursor-wait","cursor-text"),i.classList.add("outline","outline-green-600","scale-110"),setTimeout(()=>{i.classList.remove("outline","outline-green-600","scale-110")},3e3)),l(x);async function H(t){try{const n=[];for(const e of t){const o=await fetch(`${N}/institutions/states/${e.name}`);if(!o.ok)throw new Error("Network response war not ok");const a=await o.json();n.push(...a.data)}return n}catch(n){console.error("Error fetching data:",n)}}function $(){const t=i.value.toUpperCase(),n=x.filter(e=>e.institute_name.includes(t));l(n)}function P(t){const n=t.programmes;A.innerHTML="",n.forEach(e=>{console.log(e);const o=document.createElement("tr"),a=document.createElement("td");a.textContent=e.course;const m=document.createElement("td");m.textContent=e.level;const p=document.createElement("td");p.textContent=e.programme;const f=document.createElement("td");f.textContent=e.availability,o.append(a,m,p,f),A.append(o)}),T.showModal()}});
