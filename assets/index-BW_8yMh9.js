(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))b(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&b(a)}).observe(document,{childList:!0,subtree:!0});function A(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function b(s){if(s.ep)return;s.ep=!0;const r=A(s);fetch(s.href,r)}})();document.addEventListener("DOMContentLoaded",async function(){const m=document.getElementById("district"),u=document.getElementById("search"),A=document.getElementById("state"),b=document.getElementById("con"),s=document.getElementById("institution"),r=document.getElementById("University"),a=document.getElementById("programme"),N=document.getElementById("course-info"),B=document.getElementById("course-table"),F=document.getElementById("course-dialog-close-btn"),U=document.getElementById("loading-alert"),S=document.getElementById("search-alert"),H=document.getElementById("filter-div"),V=document.getElementById("card-count"),w=document.getElementById("filter-status"),$="https://indian-colleges-list.vercel.app/api",k=await O();let p=[],i=[],c=[],d=[],g=[];O(),q(k),F.addEventListener("click",()=>N.close());async function O(){try{const e=await fetch(`${$}/institutions/states`);if(!e.ok)throw new Error("Network response was not working");return(await e.json()).states}catch(e){console.error("Error fetching data:",e)}}function q(e){e.forEach(n=>{const t=document.createElement("option");t.textContent=`${n.name}`,t.value=n.name,t.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",A.append(t)})}async function P(e){try{const n=`https://indian-colleges-list.vercel.app/api/institutions/states/${e}`,t=await fetch(n);if(!t.ok)throw new Error("Network response was not ok");p=(await t.json()).data.sort((l,L)=>l.institute_name.trim().localeCompare(L.institute_name.trim())),f(p),m.innerHTML="";const v=[...new Set(p.map(l=>l.district))].sort();M(v,m),C("Districts",m),s.innerHTML="";const h=[...new Set(p.map(l=>l.institution_type))].sort();M(h,s),C("Institution",s),r.innerHTML="";const y=[...new Set(p.map(l=>l.university))].sort(),x=["NOT APPLICABLE","NONE","None","Self","SELF"],T=y.filter(l=>!x.includes(l));M(T,r),C("Universities",r),a.innerHTML="";const I=[...new Set(p.flatMap(l=>l.programmes.map(L=>L.programme)))].sort();M(I,a),C("Programmes",a)}catch(n){console.error("Error fetching data:",n)}}function M(e,n){e.forEach(t=>{const o=document.createElement("option");o.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934]",o.textContent=t,o.value=t,n.append(o)})}function C(e,n){const t=document.createElement("option");t.textContent=`All ${e}`,t.value="All",t.className="text-[#E2E8F0] border-[#2E3A47] bg-[#202934];",t.selected=!0,n.prepend(t)}function f(e,n=!1){if(e.length===0||e===""||e===null||e===void 0){b.classList.add("text-white"),b.innerHTML=`<div class="col-span-full mt-5 md:mt-20">
      
        <p class="text-blue-100 text-center">No Data found</p>
       </div>`,H.classList.replace("flex","hidden");return}S.classList.add("hidden"),H.classList.replace("hidden","flex"),V.textContent=e.length,w.innerHTML="",n?w.innerHTML=`<strong>Filtered by:</strong> ${u.value} (Collage Name)`:(w.innerHTML+=`<strong>Filtered by:</strong> ${A.value} (State)`,m.value!=="District"&&m.value!==""&&m.value!=="All"&&(w.innerHTML+=`, ${m.value} (District)`),s.value!=="Institution"&&s.value!==""&&s.value!=="All"&&(w.innerHTML+=`, ${s.value} (Institution),<br>`),r.value!=="University"&&r.value!==""&&r.value!=="All"&&(w.innerHTML+=`${r.value} (University), <br>`),a.value!=="Programme"&&a.value!==""&&a.value!=="All"&&(w.innerHTML+=`${a.value} (Programme)`));const t=document.createDocumentFragment();t.replaceChildren(),b.innerHTML="",e.forEach(o=>{const E=document.createElement("div");E.className="bg-[#0F1C2B] w-full sm:w-87.5 min-h-50 space-y-2 shadow-lg rounded-lg shadow-lg p-5 pb-10 flex flex-col content-center border border-white/20 relative";function v(z){return z.toLowerCase().split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1)).join(" ")}const h=document.createElement("h3");h.className="font-semibold text-lg text-center text-slate-200 ",h.textContent=o.institute_name;const y=document.createElement("p");y.className="text-slate-100 pt-1",y.innerHTML=`University: <span class="font-semibold text-sky-400/80">${v(o.university)}</span>`;const x=document.createElement("p");x.innerHTML=`Institution: <span class="font-semibold text-sky-400/80">${v(o.institution_type)}</span>`,x.className="text-slate-100 ";const T=document.createElement("p");T.innerHTML=`State: <span class="font-semibold text-sky-400/80">${v(o.state)}</span>`,T.className="pt-2 text-slate-100";const I=document.createElement("p");I.innerHTML=`District: <span class="font-semibold text-sky-400/80"> ${v(o.district)}</span>`,I.className="pt-2 text-slate-100";const l=document.createElement("p");l.innerHTML=`Address: <span class="font-semibold text-sky-400/80">${v(o.address)}</span>`,l.className="pb-3 pt-2 text-slate-100";const L=document.createElement("button");L.className="absolute right-3 bottom-3 px-3 py-2 bg-slate-800/80 text-sky-400/80 active:scale-95 transition-all  border border-transparent hover:border-sky-400 hover:bg-transparent hover:-translate-y-0.5 duration-300 ease-in-out hover:bg-gray-700/70  rounded   cursor-pointer",L.textContent="View Courses",L.addEventListener("click",()=>R(o)),E.append(h,x,y,T,I,l,L),t.append(E)}),b.append(t)}A.addEventListener("change",function(){P(A.value),i=[],c=[],d=[],g=[],m.value="All",s.value="All",r.value="All",a.value="All"}),m.addEventListener("change",()=>{const e=m.value;e==="All"?(P(A.value),i=p,f(i)):(i=p.filter(n=>n.district==e),f(i),c=[],d=[],g=[],s.value="All",r.value="All",a.value="All")}),s.addEventListener("change",()=>{let e=s.value;e==="All"?(c=i,f(c)):(i.length===0?i=p:c=i.filter(n=>n.institution_type===e),f(c),d=[],g=[],r.value="All",a.value="All")}),r.addEventListener("change",()=>{let e=r.value;e==="All"?(d=c,f(d)):c.length===0?(c=i,i.length===0&&(c=p)):(d=c.filter(n=>n.university===e),f(d),g=[],a.value="All")}),a.addEventListener("change",()=>{let e=a.value;e=="All"?(g=d,f(g)):d.length===0?(d=c,c.length===0&&(d=i,i.length===0&&(d=p))):(g=d.filter(n=>n.programmes.some(o=>o.programme===e)),f(g))}),u.addEventListener("input",j(Y,2e3));function j(e,n){let t;return function(...o){clearTimeout(t),t=setTimeout(()=>{e.apply(this,o)},n)}}const D=await K(k);D&&(U.classList.add("hidden"),S.classList.remove("hidden"),u.readOnly=!1,u.title="now you can searchðŸ˜Š...",u.classList.replace("cursor-wait","cursor-text"),u.classList.add("outline","outline-green-600","scale-110"),setTimeout(()=>{u.classList.remove("outline","outline-green-600","scale-110")},3e3));async function K(e){try{const n=[];for(const t of e){const o=await fetch(`${$}/institutions/states/${t.name}`);if(!o.ok)throw new Error("Network response war not ok");const E=await o.json();n.push(...E.data)}return n}catch(n){console.error("Error fetching data:",n)}}function Y(){const e=u.value.trim().toUpperCase();if(e.length>2){const n=D.filter(t=>t.institute_name.includes(e));f(n,!0)}}function R(e){const n=e.programmes;B.innerHTML="",n.forEach(t=>{console.log(t);const o=document.createElement("tr"),E=document.createElement("td");E.textContent=t.course;const v=document.createElement("td");v.textContent=t.level;const h=document.createElement("td");h.textContent=t.programme;const y=document.createElement("td");y.textContent=t.availability,o.append(E,v,h,y),B.append(o)}),N.showModal()}});
